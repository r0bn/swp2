var mainApp;

mainApp = angular.module("mainApp", ['ui.codemirror']);

mainApp.controller("mainCtrl", [
  "$scope", "$http", function($scope, $http) {
    $scope.editorOptions = {
      lineNumbers: true,
      mode: 'xml',
      theme: "eclipse"
    };
    $scope.storySelected = false;
    $scope.handleStorySelected = function() {
      return $scope.storySelected = true;
    };
    $http.get("http://api.dev.la/stories").success(function(data) {
      return $scope.storys = data;
    });
    $scope.mediaData = [
      {
        id: 1,
        name: "Cover",
        type: "image"
      }, {
        id: 2,
        name: "ReferenceBar",
        type: "image"
      }, {
        id: 3,
        name: "Introduction",
        type: "movie"
      }, {
        id: 4,
        name: "FinalScene",
        type: "movie"
      }
    ];
    return $scope.xmlFile = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n    <arml xmlns=\"http://www.opengis.net/arml/2.0\" \n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      xmlns:gml=\"http://www.opengis.net/gml/3.2\"\n      xsi:schemaLocation=\"http://www.opengis.net/arml/2.0 schema/ExARML.xsd\">\n      \n    <Story>\n        <Title>Kneipentour</Title>\n        <Description>Die Leg√§nde von Block 4</Description>\n        <Author>Arno Claus</Author>\n        <CreationDate>2015-04-01</CreationDate> <!-- Format: yyyy-mm-dd -->\n        <Size>40 MB</Size>\n        <Location>\n            <gml:Point gml:id=\"Location\">\n                <gml:pos>48.780332 9.172515</gml:pos>\n            </gml:Point>\n        </Location><!-- GML POINT -->\n        <Radius>5</Radius><!-- ALS KILOMETER-->\n        \n        <POI id=\"Punkt_A\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_B\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_C_1\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_C_2\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_D_1\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_D_2\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n        <POI id=\"Punkt_E\">\n            <Accessible>true</Accessible>\n            <Internet>true</Internet>\n        </POI>\n    </Story>\n    <Dependency>\n        <Storypoint id=\"A\" >\n            <Container>\n                <Storypointlist />\n                <Itemlist />\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"B\" >\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"#A\" />\n                </Storypointlist>\n                <Itemlist />\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"C1\" >\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"#B\" />\n                </Storypointlist>\n                <Itemlist>\n                    <ItemRef xlink:href=\"Punkt_B_E1\" />\n                </Itemlist>\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"C2\" >\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"#B\" />\n                </Storypointlist>\n                <Itemlist>\n                    <ItemRef xlink:href=\"Punkt_B_E2\" />\n                </Itemlist>\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"D1\">\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"C1\" />\n                </Storypointlist>\n                <Itemlist>\n                    <ItemRef xlink:href=\"Punkt_B_E1\" />\n                </Itemlist>\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"D2\">\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"C2\" />\n                </Storypointlist>\n                <Itemlist>\n                    <ItemRef xlink:href=\"Punkt_B_E2\" />\n                </Itemlist>\n            </Container>\n        </Storypoint>\n        <Storypoint id=\"E\">\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"D1\" />\n                </Storypointlist>\n            </Container>\n            <Container>\n                <Storypointlist>\n                    <StorypointRef xlink:href=\"D2\" />\n                </Storypointlist>\n            </Container>\n        </Storypoint>\n    </Dependency>\n    <ARElements>\n        <Feature id=\"Punkt_A_Feature\">\n            <name> Startpunkt </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Anfangsvideo\">\n                            <Href xlink:href=\"http://server.de/Anfangsvideo\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_A_Block4\">\n                        <gml:pos>48.780332 9.172515</gml:pos>\n                    </gml:Point>\n                </Geometry>\n                <InteractionList>\n                    <InteractionRef xlink:href=\"Punkt_A_Quiz\" />\n                </InteractionList>\n            </anchors>\n        </Feature>\n\n        <Feature id=\"Punkt_A_1_Feature\">\n            <name> Entscheidung 1 </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Anfangsvideo_E1\"> <!-- bei ja -->\n                            <Href xlink:href=\"http://server.de/Anfangsvideo_E1\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_A_Block4_1\">\n                        <gml:pos>48.780332 9.172515</gml:pos>\n                    </gml:Point>\n                </Geometry>\n            </anchors>\n        </Feature>\n        \n        <Feature id=\"Punkt_A_2_Feature\">\n            <name> Entscheidung 2 </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Anfangsvideo_E2\"> <!-- bei nein -->\n                            <Href xlink:href=\"http://server.de/Anfangsvideo_E2\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_A_Block4_2\">\n                        <gml:pos>48.780332 9.172515</gml:pos>\n                    </gml:Point>\n                </Geometry>\n            </anchors>\n        </Feature>\n        \n        <Feature id=\"Punkt_B_Feature\">\n            <name> Startpunkt </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Studentenvideo\">\n                            <Href xlink:href=\"http://server.de/Studentenvideo\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_B_PdR\">\n                        <gml:pos>48.779714 9.174050</gml:pos>\n                    </gml:Point>\n                </Geometry>\n                <InteractionList>\n                    <InteractionRef xlink:href=\"Punkt_B_Waychooser\" />\n                </InteractionList>\n            </anchors>\n        </Feature>\n        \n        <!-- to the end now ... -->\n        \n        <Feature id=\"Punkt_C_1_Feature\">\n            <name> Kap Tormentoso </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <!-- Wie mache ich ein Image genau? -->\n                        <Image id=\"Piratenzeugs\">\n                            <href xlink:href=\"http://server.de/Piratenzeugs\" />\n                        </Image>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_C_1_KT\">\n                        <gml:pos>48.779782 9.174015</gml:pos>\n                    </gml:Point>\n                </Geometry>\n                <InteractionList>\n                    <InteractionRef xlink:href=\"Punkt_C_1_Item\" />\n                </InteractionList>\n            </anchors>\n        </Feature>\n        \n        <Feature id=\"Punkt_C_2_Feature\">\n            <name> OneTableClub </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Image id=\"gebrauchter_Rucksack\">\n                            <href xlink:href=\"http://server.de/Rucksack\" />\n                        </Image>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_C_1_OTC\">\n                        <gml:pos>48.775659 9.171824</gml:pos>\n                    </gml:Point>\n                </Geometry>\n                <InteractionList>\n                    <InteractionRef xlink:href=\"Punkt_C_2_Item\" />\n                </InteractionList>\n            </anchors>\n        </Feature>\n        \n        <Feature id=\"Punkt_D_1_Feature\">\n            <name> Pirat </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Piratengespraech\">\n                            <Href xlink:href=\"http://server.de/Piratengespraech\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_D_1_Pirat\">\n                        <gml:pos>48.779714 9.174050</gml:pos>\n                    </gml:Point>\n                </Geometry>\n            </anchors>\n        </Feature>\n        \n        <Feature id=\"Punkt_D_1_Feature1\">\n            <name> Student </name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Studentengespraech\">\n                            <Href xlink:href=\"http://server.de/Studentengespraech\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_D_1_Student\">\n                        <gml:pos>48.779714 9.174050</gml:pos>\n                    </gml:Point>\n                </Geometry>\n            </anchors>\n        </Feature>\n        \n        <Feature>\n            <name>Ende</name>\n            <anchors>\n                <Geometry>\n                    <assets>\n                        <Video id=\"Ende\">\n                            <Href xlink:href=\"http://server.de/Ende\" />\n                        </Video>\n                    </assets>\n                    <gml:Point gml:id=\"Punkt_E_1\" >\n                        <gml:pos>48.780332 9.172515</gml:pos>\n                    </gml:Point>\n                </Geometry>\n            </anchors>\n        </Feature>\n    \n        <Interactions>\n            <Quiz id=\"Punkt_A_Quiz\">\n                <FeatureRef xlink:href=\"#Punkt_A_Feature\" />\n                <OnTrue xlink:href=\"Feature_A_1\"/>\n                <OnFalse xlink:href=\"Feature_A_2\" />\n                <Question> Bist du der Auserw√§hlte? </Question>\n                                \n                <Answer id=\"A1\">\n                    <Text> Ja </Text>\n                    <Status> true </Status>\n                </Answer>\n                <Answer id=\"A2\">\n                    <Text> Nein </Text>\n                    <Status> false </Status>\n                </Answer>\n                \n            </Quiz>\n            <!-- waychooser musste erst erfunden werden am 1.4. April april -->\n            <WayChooser id=\"Punkt_B_Waychooser\">\n                <FeatureRef xlink:href=\"#Punkt_B_Feature\" />\n                <Question> Wohin willst du gehen? </Question>\n                <Answer id=\"A3\">\n                    <Text> Kap Tormentoso </Text>\n                    <ItemRef xlink:href=\"Punkt_B_E1\" />\n                    <FeatureRef xlink:href=\"#Punkt_B_Feature\" />\n                </Answer>\n                <Answer id=\"A4\" >\n                    <Text> OneTableClub </Text>\n                    <ItemRef xlink:href=\"Punkt_B_E2\" />\n                </Answer>\n            </WayChooser>\n            <Item id=\"Punkt_B_E1\">\n                <Description> Entscheidung 1 bei Punkt B </Description>\n                <FeatureRef xlink:href=\"#Punkt_B_Feature\" />\n                <IsCollected>true</IsCollected>\n            </Item>\n            <Item id=\"Punkt_B_E2\">\n                <Description> Entscheidung 2 bei Punkt B </Description>\n                <FeatureRef xlink:href=\"#Punkt_B_Feature\" />\n                <IsCollected>true</IsCollected>\n            </Item>\n            <!-- ... Nach 28.30 Min keinen Bock mehr -->\n            <Item id=\"Punkt_C_1_Item\">\n                <Description> Priatenzeug </Description>\n                <FeatureRef xlink:href=\"#Punkt_C_1_Feature\" />\n                <IsCollected>true</IsCollected>\n            </Item>\n            <Item id=\"Punkt_C_2_Item\">\n                <Description> gebrauchter Rucksack </Description>\n                <FeatureRef xlink:href=\"#Punkt_C_2_Feature\" />\n                <IsCollected>true</IsCollected>\n            </Item>\n        </Interactions>	\n    </ARElements>\n    <!-- Dauer: 28.30 + 15 + 13 Min +15 Min= 71.30 Min -->\n</arml>\" ";
  }
]);
